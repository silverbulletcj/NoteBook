<center> Flink </center>

[toc]

## 相关概念

* 流处理

  * 在概念上来说，就是数据流是无穷无尽的，需要在数据到达的时候就能够进行处理，而不是等待按批次处理。
  * 在Flink中，数据流是一个以一个或者多个源开始，经过用户定义的操作之后，到达一个或者多个sink状态的有向图。在这有向图中，图中顶点为算子，边表示数据依赖关系。没有输入端的算子为数据源，没有输出端的算子为数据汇。

* 数据流上的操作

  * 数据接入和数据输出：数据源可以是TCP套接字、文件、kafka主题等，数据汇的写入目标可以是文件、数据库、消息队列或监控接口等
  * 转换操作：分别处理每个事件，对其进行转换得到新的输出流
  * 滚动聚合：根据到来的事件持续更新结果
  * 窗口操作：持续的创建一些称为“桶”的有限事件集合，且允许在有限集上进行计算。
    * 滚动窗口
    * 滑动窗口
    * 会话窗口

* 数据并行和任务并行

  * 数据并行：将输入数据分组，让同一操作的多个任务并行执行在不同的数据子集上
  * 任务并行：让不同的算子的任务并行计算

* 数据交换策略

  * 转发策略：任务发送端到接受端一对一传输
  * 广播策略：会把每个数据项发往下游算子的全部并行任务
  * 基于键值的策略：根据某一键值属性对数据分区，相同的键值会给同一任务处理
  * 随机策略：将数据均匀分配至算子的所有任务

* 并行数据流

* 实时流处理

  * 处理时间：当前流处理算子所在机器上的本地时钟时间
  * 事件时间：数据流中事件实际发生的时间，以附加在数据流中的时间戳为依据
  * 水位线：一个全局进度指标，表示确信不会再有延迟事件到来的某个时间点
  * 事件的发生顺序十分重要，因此用带有时间戳的事件时间能够处理对事件发生顺序要求严格的数据流

* 有状态的流处理

  * Flink上的操作是有状态的
  * 为了生成结果，函数会在一段时间或者是基于一定个数的事件来积累状态，有状态的算子需要使用传入的事件和内部状态来计算输出

* 通过状态快照实现错误容忍

  

